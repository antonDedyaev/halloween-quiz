import{H as w}from"./HorrorButton-D4aTD_XF.js";import{d as C,c as h,a as o,t as d,b as m,w as $,s as c,q as B,e as u,f as k,_ as R,u as H,g as x,G as I,o as N,m as S,l as E,k as b,x as q,y as D,z as L}from"./index-CYDu6qZk.js";import{v as n}from"./quizDB-DDEkz681.js";import V from"./web-DUS4ZeqR.js";import M from"./spider-B6DM6aa7.js";const W="/images/pumpkin.png",X={class:"horror-verdict-card-wrapper"},Y={class:"horror-verdict-card"},A={class:"horror-verdict-card__front"},T=["src"],j={class:"card-title"},F={class:"card-text"},G={class:"horror-verdict-card__back"},O=C({__name:"HorrorVerdictCard",props:{image:{},name:{},verdict:{}},setup(p){const a=B();function v(){localStorage.removeItem("currentUser"),a.push({path:"introduction"})}return(s,e)=>(u(),h("div",X,[o("div",Y,[o("div",A,[o("img",{src:s.image,alt:"Изображение на хэллоуин",class:"card-image"},null,8,T),o("h2",j,d(s.name),1),o("p",F,d(s.verdict),1)]),o("div",G,[e[5]||(e[5]=o("img",{src:W,alt:"Изображение на хэллоуин",class:"card-image"},null,-1)),m(w,{size:"xl",class:"verdict-btn",onClick:e[0]||(e[0]=l=>c(a).push({path:"leaderboard"}))},{default:$(()=>e[2]||(e[2]=[k(" Лидерборд ")])),_:1}),m(w,{size:"xl",class:"verdict-btn",onClick:e[1]||(e[1]=l=>c(a).push({path:"/"}))},{default:$(()=>e[3]||(e[3]=[k(" Пройти еще раз ")])),_:1}),m(w,{size:"xl",class:"verdict-btn",onClick:v},{default:$(()=>e[4]||(e[4]=[k(" Выйти ")])),_:1})])])]))}}),P=R(O,[["__scopeId","data-v-10a67f98"]]);function g(p,a,v,s){switch(new Intl.PluralRules("ru-RU").select(p)){case"one":return`${a}`;case"few":return`${v}`;case"many":return`${s}`;default:return`${s}`}}const Q={},J={class:"verdict-card-skeleton"};function K(p,a){return u(),h("div",J,a[0]||(a[0]=[o("div",{class:"verdict-card-skeleton__image shimmer"},null,-1),o("h2",{class:"verdict-card-skeleton__title shimmer"},null,-1),o("p",{class:"verdict-card-skeleton__text shimmer"},null,-1)]))}const Z=R(Q,[["render",K],["__scopeId","data-v-e5510979"]]),ee={class:"verdict-page"},se={class:"verdict-page__header"},te={key:0},re={class:"verdict-page__decorations"},le=C({__name:"VerdictPage",setup(p){const a=Object.freeze({victim:{name:n.poor.name,image:n.poor.image,description:n.poor.description},survivor:{name:n.satisfactory.name,image:n.satisfactory.image,description:n.satisfactory.description},hunter:{name:n.good.name,image:n.good.image,description:n.good.description},master:{name:n.excellent.name,image:n.excellent.image,description:n.excellent.description}}),{currentUser:v}=H(),s=x({answers:0,score:0,time:0,tries:0}),e=x(null),l=x(!1);function y(i){document.querySelectorAll(".verdict-page__decoration").forEach(t=>{const r=t.getAttribute("data-speed");if(r){const _=(window.innerWidth-i.pageX*Number(r))/100,f=(window.innerHeight-i.pageY*Number(r))/100;t.style.transform=`translateX(${_}px) translateY(${f}px)`}})}function z(i){const t=Math.floor(i/60),r=i%60;return t>0?`${t} ${t>1?"минуты":"минуту"}
    ${r} ${g(r,"секунду","секунды","секунд")}`:`${r} ${g(r,"секунду","секунды","секунд")}`}async function U(i){l.value=!0;try{const t=q(D,"quiz-users",i),r=await L(t);return r?r.data():null}catch(t){console.error(t)}finally{l.value=!1}}return I(async()=>{var t;const i=await U(((t=v.value)==null?void 0:t.id)??"");i&&(s.value=i),s.value.answers<5?e.value=a.victim:s.value.answers>=5&&s.value.answers<10?e.value=a.survivor:s.value.answers>=10&&s.value.answers<15?e.value=a.hunter:e.value=a.master}),N(()=>{window.addEventListener("mousemove",y)}),S(()=>{removeEventListener("mousemove",y)}),(i,t)=>{var r,_,f;return u(),h("div",ee,[o("div",se,[t[0]||(t[0]=o("h2",null,"Твой результат:",-1)),s.value?(u(),h("p",te,d(s.value.answers)+" "+d(c(g)(s.value.answers,"правильный","правильных","правильных"))+" "+d(c(g)(s.value.answers,"ответ","ответа","ответов"))+" за "+d(z(s.value.time)),1)):E("v-if",!0)]),o("div",re,[m(c(V),{"data-speed":"3",class:"verdict-page__decoration",alt:"Паутина"}),m(c(V),{"data-speed":"-3",class:"verdict-page__decoration",alt:"Паутина"}),m(c(M),{"data-speed":"3",class:"verdict-page__decoration",alt:"Паук"})]),!l.value&&e.value?(u(),b(P,{key:0,image:(r=e.value)==null?void 0:r.image,name:(_=e.value)==null?void 0:_.name,verdict:(f=e.value)==null?void 0:f.description},null,8,["image","name","verdict"])):(u(),b(Z,{key:1}))])}}});export{le as default};
