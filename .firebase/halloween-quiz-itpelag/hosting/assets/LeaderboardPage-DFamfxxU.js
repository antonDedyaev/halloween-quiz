import{d as u,e as r,c as n,a as t,t as l,n as y,_ as p,F as k,j as L,h as H,b as c,w as m,H as B,k as _,f as b,g as h,G as I,E as z,y as C,I as q,J as f,K as w}from"./index-CYDu6qZk.js";import{H as v}from"./HorrorButton-D4aTD_XF.js";import{H as N}from"./HorrorIcon-ZZkR7ucY.js";const S={class:"user-rank"},V={class:"user-name"},D={class:"user-score"},E={class:"user-time"},F={class:"user-tries"},A=u({__name:"HorrorLeaderboardItem",props:{place:{},item:{}},setup(i){function o(e){const s=Math.floor(e/60),a=e%60;return`0${s}:${a<10?"0"+a:a}`}return(e,s)=>(r(),n("li",{class:y(["horror-leaderboard-item",{top:e.place===1}])},[t("span",S,l(e.place)+".",1),t("span",V,l(e.item.name),1),t("span",D,l(e.item.score),1),t("span",E,l(o(e.item.time)),1),t("span",F,l(e.item.tries),1)],2))}}),M=p(A,[["__scopeId","data-v-96231702"]]),P={class:"leaderboard-skeleton-list"},T=u({__name:"HorrorLeaderboardSkeleton",props:{itemsAmount:{}},setup(i){return(o,e)=>(r(),n("ul",P,[(r(!0),n(k,null,L(o.itemsAmount,s=>(r(),n("li",{key:s,class:"leaderboard-skeleton-item shimmer"}))),128))]))}}),U=p(T,[["__scopeId","data-v-48f040a8"]]),j={class:"horror-leaderboard"},G={class:"horror-leaderboard__title"},J={class:"horror-leaderboard__btns"},K={key:0,class:"horror-leaderboard__list"},O=u({__name:"HorrorLeaderboard",props:{users:{},isLoading:{type:Boolean}},setup(i){const o=i;return H(()=>o.users.filter(e=>e.tries>0)),(e,s)=>(r(),n("div",j,[t("div",G,[c(N,{name:"evil-pumpkin",size:"140"}),s[4]||(s[4]=t("h2",null,"Лидерборд",-1)),t("div",J,[c(v,{size:"m",class:"leaderboard-btn",onClick:s[0]||(s[0]=a=>e.$router.push({name:"quiz"}))},{default:m(()=>s[2]||(s[2]=[b(" Новая попытка ")])),_:1}),c(v,{size:"m",class:"leaderboard-btn",onClick:s[1]||(s[1]=a=>e.$router.push({name:"introduction"}))},{default:m(()=>s[3]||(s[3]=[b(" Выход ")])),_:1})])]),s[5]||(s[5]=B('<div class="horror-leaderboard__header" data-v-53ab514a><span class="header-rank" data-v-53ab514a>Позиция</span><span class="header-user" data-v-53ab514a>Имя</span><span class="header-score" data-v-53ab514a>Счет</span><span class="header-time" data-v-53ab514a>Время</span><span class="header-tries" data-v-53ab514a>Попытки</span></div>',1)),e.isLoading?(r(),_(U,{key:1,"items-amount":5})):(r(),n("ul",K,[(r(!0),n(k,null,L(e.users,(a,d)=>(r(),_(M,{key:d,item:a,place:d+1,class:"horror-leaderboard__item"},null,8,["item","place"]))),128))]))]))}}),Q=p(O,[["__scopeId","data-v-53ab514a"]]),R={class:"leaderboard-page"},W=u({__name:"LeaderboardPage",setup(i){const o=h([]),e=h(!1);async function s(){e.value=!0;try{const a=z(C,"quiz-users"),d=q(a,f("score","desc"),f("tries","asc"));(await w(d)).forEach($=>{const g=$.data();o.value.push(g)})}catch(a){console.error(a)}finally{e.value=!1}}return I(async()=>{await s()}),(a,d)=>(r(),n("div",R,[c(Q,{users:o.value,"is-loading":e.value},null,8,["users","is-loading"])]))}}),ee=p(W,[["__scopeId","data-v-622a5ed1"]]);export{ee as default};
